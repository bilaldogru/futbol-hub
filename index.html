<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FUTBOL HUB - Oyun Merkezi</title>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <div class="bg-overlay"></div>

    <nav class="navbar">
        <div class="logo">âš½ FUTBOL<span>HUB</span></div>
        
        <div class="nav-links">
            <a href="#games-grid" class="active">Oyunlar</a>
            <a href="#leaderboard">Liderlik Tablosu</a>
            <a href="#about">HakkÄ±mÄ±zda</a>
        </div>
        
        <div class="user-profile">
            <div id="login-btn">
                <i class="fa-solid fa-user-circle"></i> GiriÅŸ Yap
            </div>
            
            <div id="user-info">
                <span id="user-total-score" class="score-badge">0 P</span>
                
                <button id="shop-btn" onclick="openShop()">
                    <i class="fa-solid fa-cart-shopping"></i> MAÄAZA
                </button>

                <img id="user-pic" src="" alt="Avatar">
                <span id="user-name"></span>
                <span id="logout-btn"><i class="fa-solid fa-right-from-bracket"></i></span>
            </div>
        </div>
    </nav>

    <header class="hero">
        <div class="hero-content">
            <h1>FUTBOL BÄ°LGÄ°NÄ° KONUÅTUR</h1>
            <p>En zorlu futbol bulmacalarÄ±, tahmin oyunlarÄ± ve taktik savaÅŸlarÄ± tek adreste.</p>
            <a href="#games-grid" class="cta-button">OYNAMAYA BAÅLA</a>
        </div>
    </header>

    <section id="games-grid" class="container">
        <h2 class="section-title">ğŸ”¥ POPÃœLER OYUNLAR</h2>
        
        <div class="grid">
            
            <div class="game-card">
                <div class="card-image hangman-bg">
                    <span class="badge">GÃœNLÃœK</span>
                </div>
                <div class="card-info">
                    <h3>Futbolcu Bilmece</h3>
                    <p>Ä°puÃ§larÄ±nÄ± takip et, gizli futbolcuyu bul. Her gÃ¼n yeni 10 soru!</p>
                    <div class="card-stats">
                        <span><i class="fa-solid fa-play"></i> 1.2k Oynanma</span>
                        <span><i class="fa-solid fa-star"></i> 4.8</span>
                    </div>
                    <a href="games/tahmin-et/index.html" class="play-btn">OYNA</a>
                </div>
            </div>

            <div class="game-card" style="cursor: pointer;" onclick="location.href='games/footle/index.html'">
                <img src="https://images.unsplash.com/photo-1551958219-acbc608c6377?q=80&w=600&h=400&auto=format&fit=crop" style="width:100%; height:200px; object-fit:cover;" alt="Footle">
                 <div class="card-info">
                    <h3>Footle</h3>
                    <p>GÃ¼nÃ¼n gizli futbolcusunu Ã¶zellikleri ile bul!</p>
                    <a href="games/footle/index.html" class="play-btn">OYNA</a>
                 </div>
            </div>

            <div class="game-card" onclick="location.href='games/grid/index.html'">
                <div class="card-image" style="background: linear-gradient(135deg, #e91e63, #4a148c); display:flex; justify-content:center; align-items:center; height: 180px; position: relative;">
                    <span class="badge" style="background: #ffd700; color: #000;">YENÄ° / 1v1</span>
                    <h2 style="font-size: 4rem; color: white; margin: 0; filter: drop-shadow(0 0 10px rgba(255,255,255,0.5));">âŒâ­•</h2>
                </div>
                <div class="card-info">
                    <h3>Grid SavaÅŸlarÄ±</h3>
                    <p>1v1 KesiÅŸim oyunu! Futbol bilginle X-O-X tahtasÄ±nÄ± ele geÃ§ir.</p>
                    <div class="play-btn" style="background: #e91e63; color: white; border-color: #e91e63;">MEYDAN OKU</div>
                </div>
            </div>
            
            <div class="game-card locked">
                <div class="card-image squad-bg">
                    <span class="badge coming-soon">YAKINDA</span>
                </div>
                <div class="card-info">
                    <h3>Kadro MÃ¼hendisi</h3>
                    <p>Verilen bÃ¼tÃ§eyle en iyi 11'i kur, puanlarÄ± topla.</p>
                    <button class="play-btn disabled">BEKLEMEDE</button>
                </div>
            </div>

            <div class="game-card locked">
                <div class="card-image tactics-bg">
                    <span class="badge coming-soon">YAKINDA</span>
                </div>
                <div class="card-info">
                   <h3>Taktik TahtasÄ±</h3>
                   <p>YakÄ±nda eklenecek...</p>
                   <button class="play-btn disabled">BEKLEMEDE</button>
                </div>
            </div>

        </div>
    </section>

    <section id="leaderboard" class="leaderboard-section">
        <div class="container">
            <h2 class="section-title">ğŸ† HAFTANIN KRALLARI</h2>
            <p class="section-desc">Bu hafta en Ã§ok puanÄ± toplayan ve futbol bilgisini kanÄ±tlayan efsaneler.</p>
            
            <div class="leaderboard-wrapper">
                <p style="text-align:center; color:#888;">YÃ¼kleniyor...</p>
            </div>

            <div class="leaderboard-list">
                </div>
        </div>
    </section>

    <div id="shop-modal" class="modal">
        <div class="modal-content shop-content">
            <span class="close-btn" onclick="closeShop()">&times;</span>
            <h2 style="font-size: 2.2rem; margin-bottom: 5px; color: white;">PAKET AÃ‡ILIMI</h2>
            <p style="color: #aaa; margin-bottom: 20px;">ÅansÄ±na gÃ¼veniyor musun?</p>
            
            <div class="ball-container">
                <div class="ball-card" onclick="buyPack('bronze')">
                    <div class="ball ball-bronze"></div>
                    <h3>Bronz Top</h3>
                    <p style="font-size: 0.8rem; color:#ccc;">%10 YÄ±ldÄ±z ÅansÄ±</p>
                    <div class="price-tag">500 P</div>
                </div>

                <div class="ball-card" onclick="buyPack('silver')">
                    <div class="ball ball-silver"></div>
                    <h3>GÃ¼mÃ¼ÅŸ Top</h3>
                    <p style="font-size: 0.8rem; color:#ccc;">%35 YÄ±ldÄ±z ÅansÄ±</p>
                    <div class="price-tag">1000 P</div>
                </div>

                <div class="ball-card" onclick="buyPack('gold')">
                    <div class="ball ball-gold"></div>
                    <h3>AltÄ±n Top</h3>
                    <p style="font-size: 0.8rem; color:#ccc;">%80 YÄ±ldÄ±z ÅansÄ±</p>
                    <div class="price-tag">2500 P</div>
                </div>
            </div>
        </div>
    </div>

    <section id="about" class="about-section">
        <div class="container about-container">
            <div class="about-text">
                <h2 class="section-title">HAKKIMIZDA</h2>
                <p>
                    Biz, futbol tutkusunu kodlarla birleÅŸtiren iki mÃ¼hendis adayÄ±yÄ±z. 
                    <strong>FutbolHub</strong>, sÄ±radan bilgi yarÄ±ÅŸmalarÄ±ndan sÄ±kÄ±lanlar iÃ§in tasarlandÄ±.
                </p>
                <div class="features">
                    <div class="feature-box">
                        <i class="fa-solid fa-code"></i>
                        <span>AÃ§Ä±k Kaynak</span>
                    </div>
                    <div class="feature-box">
                        <i class="fa-solid fa-users"></i>
                        <span>Topluluk OdaklÄ±</span>
                    </div>
                </div>
            </div>
            <div class="about-image">
                <img src="https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?q=80&w=1000" alt="Kodlama ve Futbol">
            </div>
        </div>
    </section>
    
    <footer>
        <p>&copy; 2026 FutbolHub </p>
    </footer>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
      import { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
      import { getFirestore, collection, query, orderBy, limit, getDocs, where } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyD62cMqFmtT_LYOQdyLEib3TlP2sDXVHUY",
        authDomain: "futbol-hub0.firebaseapp.com", 
        projectId: "futbol-hub0", 
        storageBucket: "futbol-hub0.firebasestorage.app", 
        messagingSenderId: "995690857981", 
        appId: "1:995690857981:web:01f199920e1c131cd04594", 
        measurementId: "G-7JT28VLCTE" 
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db = getFirestore(app);
      const provider = new GoogleAuthProvider();

      const loginBtn = document.getElementById('login-btn');
      const userInfo = document.getElementById('user-info');
      const userName = document.getElementById('user-name');
      const userPic = document.getElementById('user-pic');
      const logoutBtn = document.getElementById('logout-btn');
      const scoreBadge = document.getElementById('user-total-score');
      
      window.openShop = () => {
          document.getElementById('shop-modal').style.display = 'flex'; 
      };
      
      window.closeShop = () => {
          document.getElementById('shop-modal').style.display = 'none';
      };

      window.onclick = function(event) {
          const modal = document.getElementById('shop-modal');
          if (event.target == modal) {
              modal.style.display = "none";
          }
      }

      window.buyPack = (type) => {
          let packName = type === 'bronze' ? 'Bronz' : type === 'silver' ? 'GÃ¼mÃ¼ÅŸ' : 'AltÄ±n';
          alert(packName + " Top aÃ§Ä±lÄ±yor... âš½ (ÅansÄ±na gÃ¼ven!)");
      };

      loginBtn.addEventListener('click', () => {
        signInWithPopup(auth, provider).catch((error) => console.error("Hata:", error));
      });

      logoutBtn.addEventListener('click', () => {
        signOut(auth).then(() => location.reload());
      });

      onAuthStateChanged(auth, async (user) => {
        if (user) {
          loginBtn.style.display = 'none';
          userInfo.style.display = 'flex';
          userName.textContent = user.displayName.split(" ")[0];
          userPic.src = user.photoURL;
          
          localStorage.setItem('firebaseUser', JSON.stringify({
            uid: user.uid, name: user.displayName, photo: user.photoURL, email: user.email
          }));

          await fetchUserScore(user.email);
        } else {
          loginBtn.style.display = 'block';
          userInfo.style.display = 'none';
          scoreBadge.style.display = 'none';
          localStorage.removeItem('firebaseUser');
        }
      });

      async function fetchUserScore(email) {
        try {
            const q = query(collection(db, "scores"), where("email", "==", email));
            const querySnapshot = await getDocs(q);

            if (!querySnapshot.empty) {
                const data = querySnapshot.docs[0].data();
                scoreBadge.innerText = `${data.score} P`;
                scoreBadge.style.display = 'inline-block';
            } else {
                scoreBadge.innerText = "0 P";
                scoreBadge.style.display = 'inline-block';
            }
        } catch (e) {
            console.error("Puan Ã§ekilemedi:", e);
        }
      }

      async function fetchLeaderboard() {
        try {
            const q = query(collection(db, "scores"), orderBy("score", "desc"), limit(5));
            const querySnapshot = await getDocs(q);
            
            const wrapper = document.querySelector('.leaderboard-wrapper');
            const list = document.querySelector('.leaderboard-list');
            
            wrapper.innerHTML = '';
            list.innerHTML = '';

            let rank = 1;
            const medals = ['gold', 'silver', 'bronze'];

            querySnapshot.forEach((doc) => {
              const data = doc.data();
              if (rank <= 3) {
                wrapper.innerHTML += `
                <div class="podium-card ${medals[rank-1]}">
                    <div class="rank-badge">${rank}</div>
                    <div class="avatar"><img src="${data.photo}" style="width:50px; border-radius:50%"></div>
                    <h3>${data.name.split(' ')[0]}</h3>
                    <p class="score">${data.score} P</p>
                </div>`;
              } else {
                list.innerHTML += `
                <div class="list-item">
                    <span class="rank">${rank}</span>
                    <span class="name"><img src="${data.photo}" style="width:20px; border-radius:50%; margin-right:10px"> ${data.name}</span>
                    <span class="points">${data.score} P</span>
                </div>`;
              }
              rank++;
            });
        } catch(e) { console.log("Tablo hatasÄ±:", e); }
      }
      
      fetchLeaderboard();
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const lastScroll = sessionStorage.getItem("futbolHub_scroll");
            if (lastScroll) {
                window.scrollTo(0, parseInt(lastScroll));
            }
        });

        window.addEventListener("scroll", function() {
            sessionStorage.setItem("futbolHub_scroll", window.scrollY);
        });
    </script>

</body>
</html>