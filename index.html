<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FUTBOL HUB - Oyun Merkezi</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <div class="bg-overlay"></div>

    <nav class="navbar">
        <div class="logo">âš½ FUTBOL<span>HUB</span></div>
        
        <div class="nav-links">
            <a href="#games-grid" class="active">Oyunlar</a>
            <a href="#leaderboard">Liderlik Tablosu</a>
            <a href="#about">HakkÄ±mÄ±zda</a>
        </div>
        
        <div class="user-profile">
            <div id="login-btn">
                <i class="fa-solid fa-user-circle"></i> GiriÅŸ Yap
            </div>
            
            <div id="user-info">
                <span id="user-total-score" class="score-badge">0 P</span>
                <div id="level-container" style="display: none; align-items: center; gap: 8px; margin-right: 15px;">
    <span id="user-level" style="background: linear-gradient(45deg, #3b82f6, #8b5cf6); color: white; padding: 4px 10px; border-radius: 8px; font-weight: 900; font-size: 0.8rem; text-shadow: 0 1px 3px rgba(0,0,0,0.5);">Lv.1</span>
    <div style="width: 80px; height: 10px; background: rgba(255,255,255,0.1); border-radius: 10px; overflow: hidden; border: 1px solid rgba(255,255,255,0.2);">
        <div id="xp-bar-fill" style="height: 100%; width: 0%; background: linear-gradient(90deg, #3b82f6, #22c55e); transition: width 0.5s ease-out;"></div>
    </div>
</div>
                <button id="shop-btn" onclick="openShop()">
                    <i class="fa-solid fa-cart-shopping"></i> MAÄAZA
                </button>
                <img id="user-pic" src="" alt="Avatar">
                <span id="user-name"></span>
                <span id="logout-btn"><i class="fa-solid fa-right-from-bracket"></i></span>
            </div>
        </div>
    </nav>

    <header class="hero">
        <div class="hero-content">
            <h1>FUTBOL BÄ°LGÄ°NÄ° KONUÅTUR</h1>
            <h2>En zorlu futbol bulmacalarÄ±, tahmin oyunlarÄ± ve taktik savaÅŸlarÄ± tek adreste.</h2>
            <br>
            <a href="#games-grid" class="cta-button">OYNAMAYA BAÅLA</a>
        </div>

        <div class="wave-divider">
            <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
                <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" class="shape-fill"></path>
            </svg>
        </div>
    </header>

    <div class="news-ticker">
        <div class="ticker-content" id="dynamic-ticker">
            <span>YÃ¼kleniyor...</span>
        </div>
    </div>

    <section id="games-grid">
        <div class="container">
            <h2 class="section-title">
                <i class="fa-solid fa-fire fire-icon"></i> 
                <span class="fire-text">POPÃœLER OYUNLAR</span>
            </h2>
            
            <div class="grid">
                
                <div class="game-card card-green reveal" onclick="location.href='games/tahmin-et/index.html'">
                    <div class="card-image">
                        <div class="bg-img" style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.4) 0%, rgba(0, 0, 0, 0.8) 100%), url('https://images.unsplash.com/photo-1574629810360-7efbbe195018?q=80&w=1000');"></div>
                        <span class="badge">GÃœNLÃœK</span>
                    </div>
                    <div class="card-info">
                        <h3>Gizli Efsane</h3>
                        <p>Ä°puÃ§larÄ±nÄ± takip et, gizli futbolcuyu bul. Her gÃ¼n yeni 10 soru!</p>
                        <div class="card-stats">
                            <span><i class="fa-solid fa-play"></i> 1.2k Oynanma</span>
                            <span><i class="fa-solid fa-star" style="color: #ffd700;"></i> 4.8</span>
                        </div>
                        <div class="play-btn">OYNA</div>
                    </div>
                </div>

                <div class="game-card card-blue reveal" onclick="location.href='games/footle/index.html'">
                    <div class="card-image">
                        <div class="bg-img" style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.4) 0%, rgba(0, 0, 0, 0.8) 100%), url('https://images.unsplash.com/photo-1551958219-acbc608c6377?q=80&w=600&h=400');"></div>
                        <span class="badge" style="background: var(--accent-blue); color: #fff; border: 1px solid #7cb3ff;">GÃœNLÃœK / MÃœCADELE</span>
                    </div>
                    <div class="card-info">
                        <h3>Footle</h3>
                        <p>GÃ¼nÃ¼n gizli futbolcusunu Ã¶zellikleri ile bul!</p>
                        <div class="card-stats">
                            <span><i class="fa-solid fa-play"></i> 2.4k Oynanma</span>
                            <span><i class="fa-solid fa-star" style="color: #ffd700;"></i> 4.9</span>
                        </div>
                        <div class="play-btn">OYNA</div>
                    </div>
                </div>

                <div class="game-card card-fuchsia reveal" onclick="location.href='games/grid/index.html'">
                    <div class="card-image">
                        <div class="bg-img" style="background: linear-gradient(135deg, #e91e63, #4a148c);"></div>
                        <span class="badge live" style="background: linear-gradient(135deg, #e91e63, #4a148c); color: #fff; border: 1px solid #ff6699;">YENÄ° / 1v1</span>
                        <h2 class="grid-emoji">âŒâ­•</h2>
                    </div>
                    <div class="card-info">
                        <h3>Grid SavaÅŸlarÄ±</h3>
                        <p>1v1 KesiÅŸim oyunu! Futbol bilginle X-O-X tahtasÄ±nÄ± ele geÃ§ir.</p>
                        <div class="card-stats">
                            <span><i class="fa-solid fa-play"></i> 850 Oynanma</span>
                            <span><i class="fa-solid fa-star" style="color: #ffd700;"></i> 4.7</span>
                        </div>
                        <div class="play-btn">MEYDAN OKU</div>
                    </div>
                </div>

                <div class="game-card card-orange reveal" onclick="location.href='games/kafa-topu/index.html'">
                    <div class="card-image">
                        <div class="bg-img" style="background: linear-gradient(135deg, rgba(230, 126, 34, 0.4) 0%, rgba(0, 0, 0, 0.8) 100%), url('https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=600&h=400');"></div>
                        <span class="badge" style="background: var(--primary-orange); color: #fff; border: 1px solid #ffb077;">YEREL 1v1</span>
                    </div>
                    <div class="card-info">
                        <h3>Arena</h3>
                        <p>ArkadaÅŸlarÄ±nla heyecan dolu bir mÃ¼sabakaya hazÄ±r mÄ±sÄ±n?</p>
                        <div class="card-stats">
                            <span><i class="fa-solid fa-gamepad"></i> 2 KiÅŸilik</span>
                            <span><i class="fa-solid fa-star" style="color: #ffd700;"></i> 4.9</span>
                        </div>
                        <div class="play-btn">SAHAYA Ä°N</div>
                    </div>
                </div>
                
                <div class="game-card locked reveal">
                    <div class="card-image">
                        <div class="bg-img" style="background: linear-gradient(135deg, rgba(33, 150, 243, 0.4) 0%, rgba(0, 0, 0, 0.8) 100%), url('https://images.unsplash.com/photo-1508098682722-e99c43a406b2?q=80&w=1000');"></div>
                        <span class="badge coming-soon">YAKINDA</span>
                    </div>
                    <div class="card-info">
                        <h3>Kadro MÃ¼hendisi</h3>
                        <p>Verilen bÃ¼tÃ§eyle en iyi 11'i kur, puanlarÄ± topla.</p>
                        <button class="play-btn disabled">BEKLEMEDE</button>
                    </div>
                </div>

                <div class="game-card locked reveal">
                    <div class="card-image">
                        <div class="bg-img" style="background: linear-gradient(45deg, #4a148c, #000);"></div>
                        <span class="badge coming-soon">YAKINDA</span>
                    </div>
                    <div class="card-info">
                        <h3>Taktik TahtasÄ±</h3>
                        <p>YakÄ±nda eklenecek...</p>
                        <button class="play-btn disabled">BEKLEMEDE</button>
                    </div>
                </div>

            </div>
        </div>

        <div class="wave-divider" style="transform: rotate(0deg); bottom: -1px;">
            <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
                <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" class="shape-fill"></path>
            </svg>
        </div>
    </section>
    
    <section id="leaderboard">
        <div class="container">
            <h2 class="section-title"><i class="fa-solid fa-trophy" style="color: #ffd700;"></i> HAFTANIN KRALLARI</h2>
            <p class="section-desc">Bu hafta en Ã§ok puanÄ± toplayan ve futbol bilgisini kanÄ±tlayan efsaneler.</p>
            
            <div class="leaderboard-wrapper">
                <p style="text-align:center; color:#888;">YÃ¼kleniyor...</p>
            </div>

            <div class="leaderboard-list">
            </div>
        </div>

         <div class="wave-divider" style="bottom: -1px;">
            <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
                <path d="M985.66,92.83C906.67,72,823.78,31,743.84,14.19c-82.26-17.34-168.06-16.33-250.45.39-57.84,11.73-114,31.07-172,41.86A600.21,600.21,0,0,1,0,27.35V120H1200V95.8C1132.19,118.92,1055.71,111.31,985.66,92.83Z" class="shape-fill"></path>
            </svg>
        </div>
    </section>

    <div id="shop-modal" class="modal">
        <div class="modal-content shop-content">
            <span class="close-btn" onclick="closeShop()">&times;</span>
            <h2 style="font-size: 2.2rem; margin-bottom: 5px; color: white;">PAKET AÃ‡ILIMI</h2>
            <p style="color: #aaa; margin-bottom: 20px;">ÅansÄ±na gÃ¼veniyor musun?</p>
            
            <div class="ball-container">
                <div class="ball-card" onclick="buyPack('bronze')">
                    <div class="ball ball-bronze"></div>
                    <h3>Bronz Top</h3>
                    <p style="font-size: 0.8rem; color:#ccc;">%10 YÄ±ldÄ±z ÅansÄ±</p>
                    <div class="price-tag">500 P</div>
                </div>

                <div class="ball-card" onclick="buyPack('silver')">
                    <div class="ball ball-silver"></div>
                    <h3>GÃ¼mÃ¼ÅŸ Top</h3>
                    <p style="font-size: 0.8rem; color:#ccc;">%35 YÄ±ldÄ±z ÅansÄ±</p>
                    <div class="price-tag">1000 P</div>
                </div>

                <div class="ball-card" onclick="buyPack('gold')">
                    <div class="ball ball-gold"></div>
                    <h3>AltÄ±n Top</h3>
                    <p style="font-size: 0.8rem; color:#ccc;">%80 YÄ±ldÄ±z ÅansÄ±</p>
                    <div class="price-tag">2500 P</div>
                </div>
            </div>
        </div>
    </div>

    <section id="about">
        <div class="container about-container">
            <div class="about-text">
                <h2 class="section-title">HAKKIMIZDA</h2>
                <p>
                    Biz, futbol tutkusunu kodlarla birleÅŸtiren iki mÃ¼hendis adayÄ±yÄ±z. 
                    <strong>FutbolHub</strong>, sÄ±radan bilgi yarÄ±ÅŸmalarÄ±ndan sÄ±kÄ±lanlar iÃ§in tasarlandÄ±.
                </p>
                
                <div class="about-points">
                    <div class="point-item">
                        <span class="dot"></span>
                        <p><strong>Topluluk OdaklÄ±:</strong> Her gÃ¼ncellememizde kullanÄ±cÄ± geri bildirimlerini temel alÄ±yoruz.</p>
                    </div>
                    <div class="point-item">
                        <span class="dot"></span>
                        <p><strong>SÃ¼rekli GÃ¼ncel:</strong> Transferler ve lig durumlarÄ± anlÄ±k olarak oyunlarÄ±mÄ±za yansÄ±r.</p>
                    </div>
                </div>

                <div class="contact-box">
                    <div class="contact-item">
                        <i class="fa-solid fa-envelope-open-text"></i>
                        <div>
                            <h4>Soru ve GÃ¶rÃ¼ÅŸleriniz Ä°Ã§in</h4>
                            <a href="mailto:destek@futbolhub.com">destek@futbolhub.com</a>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fa-solid fa-handshake"></i>
                        <div>
                            <h4>Sponsorluk ve Ä°ÅŸ BirliÄŸi</h4>
                            <a href="mailto:business@futbolhub.com">business@futbolhub.com</a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="about-image">
                <img src="https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?q=80&w=1000" alt="Kodlama ve Futbol">
            </div>
        </div>
    </section>
    
    <footer>
        <p>&copy; 2026 FutbolHub </p>
    </footer>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
      import { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
      // DÄ°KKAT: onSnapshot buraya eklendi!
      import { getFirestore, collection, query, orderBy, limit, getDocs, where, onSnapshot } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyD62cMqFmtT_LYOQdyLEib3TlP2sDXVHUY",
        authDomain: "futbol-hub0.firebaseapp.com", 
        projectId: "futbol-hub0", 
        storageBucket: "futbol-hub0.firebasestorage.app", 
        messagingSenderId: "995690857981", 
        appId: "1:995690857981:web:01f199920e1c131cd04594", 
        measurementId: "G-7JT28VLCTE" 
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db = getFirestore(app);
      const provider = new GoogleAuthProvider();

      const loginBtn = document.getElementById('login-btn');
      const userInfo = document.getElementById('user-info');
      const userName = document.getElementById('user-name');
      const userPic = document.getElementById('user-pic');
      const logoutBtn = document.getElementById('logout-btn');
      const scoreBadge = document.getElementById('user-total-score');
      
      window.openShop = () => { document.getElementById('shop-modal').style.display = 'flex'; };
      window.closeShop = () => { document.getElementById('shop-modal').style.display = 'none'; };

      window.onclick = function(event) {
          const modal = document.getElementById('shop-modal');
          if (event.target == modal) { modal.style.display = "none"; }
      }

      window.buyPack = (type) => {
    closeShop();
    
    const overlay = document.getElementById('pack-overlay');
    const container = document.getElementById('pack-container');
    const ballEl = document.getElementById('pack-animated-ball');
    const rewardEl = document.getElementById('pack-reward');
    const rewardTitle = document.getElementById('reward-title');
    const rewardDesc = document.getElementById('reward-desc');

    // Topun rengini ve baÅŸlangÄ±Ã§ durumunu ayarla
    ballEl.className = `ball`; // Ã–nce temizle
    setTimeout(() => { ballEl.classList.add(`ball-${type}`, 'scale-in', 'spin'); }, 50);
    
    // EkranÄ± aÃ§ ve Ã¶dÃ¼lÃ¼ gizle
    overlay.classList.add('active');
    rewardEl.classList.remove('show');
    
    // 1. AÅŸama: Top sallansÄ±n
    setTimeout(() => { container.classList.add('pack-shake'); }, 1500);

    // 2. AÅŸama: Top patlar ve Ã¶dÃ¼l Ã§Ä±kar
    setTimeout(() => {
        container.classList.remove('pack-shake');
        ballEl.classList.remove('scale-in'); ballEl.classList.add('scale-out'); // Top kÃ¼Ã§Ã¼lÃ¼p kaybolur
        
        // Ã–dÃ¼l Metinleri
        if(type === 'gold') { rewardTitle.innerText = "Ä°KONÄ°K KART!"; rewardDesc.innerText = "AltÄ±n Krampon Kilidi AÃ§Ä±ldÄ±!"; }
        else if(type === 'silver') { rewardTitle.innerText = "NADÄ°R GÃœÃ‡!"; rewardDesc.innerText = "+10 Enerji BaÅŸlangÄ±cÄ±!"; }
        else { rewardTitle.innerText = "STANDART"; rewardDesc.innerText = "SÄ±radan Forma Paketi"; }

        rewardEl.style.display = "flex"; // GÃ¶rÃ¼nÃ¼r yap
        setTimeout(() => rewardEl.classList.add('show'), 50); // Animasyonu tetikle
    }, 2500);
};

window.closePack = () => {
    document.getElementById('pack-overlay').classList.remove('active');
    // KapatÄ±nca topu eski haline getir ki bir dahakine yine animasyonla gelsin
    document.getElementById('pack-animated-ball').classList.remove('scale-out', 'spin');
    document.getElementById('pack-reward').style.display = "none";
};

      loginBtn.addEventListener('click', () => {
        signInWithPopup(auth, provider).catch((error) => console.error("Hata:", error));
      });

      logoutBtn.addEventListener('click', () => {
        signOut(auth).then(() => location.reload());
      });

      onAuthStateChanged(auth, async (user) => {
        if (user) {
          loginBtn.style.display = 'none';
          userInfo.style.display = 'flex';
          userName.textContent = user.displayName.split(" ")[0];
          userPic.src = user.photoURL;
          
          localStorage.setItem('firebaseUser', JSON.stringify({
            uid: user.uid, name: user.displayName, photo: user.photoURL, email: user.email
          }));

          await fetchUserScore(user.email);
        } else {
          loginBtn.style.display = 'block';
          userInfo.style.display = 'none';
          scoreBadge.style.display = 'none';
          localStorage.removeItem('firebaseUser');
        }
      });

      async function fetchUserScore(email) {
    try {
        const q = query(collection(db, "scores"), where("email", "==", email));
        const querySnapshot = await getDocs(q);

        let score = 0;
        if (!querySnapshot.empty) {
            score = querySnapshot.docs[0].data().score;
        }
        
        // PuanÄ± yazdÄ±r
        scoreBadge.innerText = `${score} P`;
        scoreBadge.style.display = 'inline-block';

        // XP ve Seviye Hesaplama (Her 500 Puan = 1 Seviye)
        const level = Math.floor(score / 500) + 1;
        const currentXp = score % 500;
        const xpPercentage = (currentXp / 500) * 100;

        document.getElementById('level-container').style.display = 'flex';
        document.getElementById('user-level').innerText = `Lv.${level}`;
        document.getElementById('xp-bar-fill').style.width = `${xpPercentage}%`;

    } catch (e) { console.error("Puan Ã§ekilemedi:", e); }
}

      async function fetchLeaderboard() {
        try {
            const q = query(collection(db, "scores"), orderBy("score", "desc"), limit(5));
            const querySnapshot = await getDocs(q);
            
            const wrapper = document.querySelector('.leaderboard-wrapper');
            const list = document.querySelector('.leaderboard-list');
            
            wrapper.innerHTML = '';
            list.innerHTML = '';

            let rank = 1;
            const medals = ['gold', 'silver', 'bronze'];

            querySnapshot.forEach((doc) => {
              const data = doc.data();
              if (rank <= 3) {
                wrapper.innerHTML += `
                <div class="podium-card ${medals[rank-1]}">
                    <div class="rank-badge">${rank}</div>
                    <div class="avatar"><img src="${data.photo}" style="width:50px; border-radius:50%"></div>
                    <h3>${data.name.split(' ')[0]}</h3>
                    <p class="score">${data.score} P</p>
                </div>`;
              } else {
                list.innerHTML += `
                <div class="list-item">
                    <span class="rank">${rank}</span>
                    <span class="name"><img src="${data.photo}" style="width:20px; border-radius:50%; margin-right:10px"> ${data.name}</span>
                    <span class="points">${data.score} P</span>
                </div>`;
              }
              rank++;
            });
        } catch(e) { console.log("Tablo hatasÄ±:", e); }
      }
      
      fetchLeaderboard();

      // --- KAYAR YAZI BANDINI (TICKER) FIREBASE'DEN CANLI Ã‡EKME ---
      function loadDynamicTicker() {
          const tickerContainer = document.getElementById('dynamic-ticker');
          
          onSnapshot(collection(db, "ticker_messages"), (snapshot) => {
              let messagesHTML = "";
              
              if (snapshot.empty) {
                  messagesHTML = `
                      <span>ğŸ”¥ <strong>SÄ°STEM:</strong> VeritabanÄ±ndan mesaj bekleniyor...</span>
                      <span>ğŸ† <strong>BÄ°LGÄ°:</strong> Firebase panelinden 'ticker_messages' koleksiyonu oluÅŸturun.</span>
                  `;
              } else {
                  snapshot.forEach((doc) => {
                      messagesHTML += `<span>${doc.data().text}</span>`;
                  });
              }

              // CSS kayma animasyonu iÃ§in yazÄ±larÄ± iki kez ekliyoruz
              tickerContainer.innerHTML = messagesHTML + messagesHTML;
          }, (error) => {
              console.error("Ticker Ã§ekilirken hata:", error);
          });
      }

      loadDynamicTicker();

    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const lastScroll = sessionStorage.getItem("futbolHub_scroll");
            if (lastScroll) {
                window.scrollTo(0, parseInt(lastScroll));
            }
        });

        window.addEventListener("scroll", function() {
            sessionStorage.setItem("futbolHub_scroll", window.scrollY);
        });
    </script>

    <script>
    function reveal() {
        var reveals = document.querySelectorAll(".reveal");

        for (var i = 0; i < reveals.length; i++) {
            var windowHeight = window.innerHeight;
            var elementTop = reveals[i].getBoundingClientRect().top;
            var elementVisible = 100; 

            if (elementTop < windowHeight - elementVisible) {
                reveals[i].classList.add("active");
            }
        }
    }

    window.addEventListener("scroll", reveal);
    window.addEventListener("load", reveal);
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.8.0/vanilla-tilt.min.js"></script>


    <div id="pack-overlay">
    <div id="pack-container">
        <div id="pack-animated-ball" class="ball"></div>
        
        <div id="pack-reward">
            <div class="reward-card">
                <div class="reward-content">
                    <i class="fa-solid fa-star bounce-star"></i>
                    <h2 id="reward-title">EFSANEVÄ°!</h2>
                    <p id="reward-desc">Gizli yetenek kilidi aÃ§Ä±ldÄ±</p>
                </div>
            </div>
            <button onclick="closePack()" class="continue-btn">DEVAM ET</button>
        </div>
    </div>
</div>
</body>
</html>